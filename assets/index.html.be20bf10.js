import{_ as a,r as o,o as t,c as r,a as e,b as n,d,w as c,e as i}from"./app.be9fb1bc.js";const l={},h=i(`<h1 id="ethereum-permissioning" tabindex="-1"><a class="header-anchor" href="#ethereum-permissioning" aria-hidden="true">#</a> Ethereum Permissioning</h1><p>In the 1.8 release, VMware Blockchain for Ethereum implements “account permissioning” as a tech preview feature in accordance with the Enterprise Ethereum Alliance (EEA) specifications to provide the necessary tools and granularity to govern actions permitted by accounts on the blockchain. Permissioning in the context of enterprise blockchains is a required feature for our customers as they seek ways to control access to deploy and execute smart contracts running on the blockchain. The account permissioning feature can be enabled during network creation by providing the necessary parameters in the deployment configurations file. The compiled permissioning smart contract and the account(s) that can grant permissions to other addresses should also be included in the genesis file. The “permission admin” user can use a dApp or the permissioning user interface to control which accounts are allowed to send transactions and specify the type of transactions permitted. Types of transaction can be READ, WRITE and DEPLOY permissions to other accounts. The dApp should be the preferred method to grant access to a large number of accounts.</p><p>By default in VMware Blockchain the permissioning feature is disabled. It means anybody can read and write to blockchain.</p><h2 id="permissioning-contract" tabindex="-1"><a class="header-anchor" href="#permissioning-contract" aria-hidden="true">#</a> Permissioning Contract</h2><p>For reference, Permissioning contract is present at <code>vmware-blockchain-samples/vmbc-ethereum/permissioning/contracts/Permissioning.sol</code></p><p>(Note: This contract is provided here just for reference, this contract is pre-deployed in VMware Blockchain for Ethereum, changes to this contract&#39;s source code here, will not propogate to VMware Blockchain)</p><h2 id="permissioning-fields-in-values-yaml" tabindex="-1"><a class="header-anchor" href="#permissioning-fields-in-values-yaml" aria-hidden="true">#</a> Permissioning fields in <code>values.yaml</code></h2><h3 id="configurable-fields" tabindex="-1"><a class="header-anchor" href="#configurable-fields" aria-hidden="true">#</a> Configurable fields</h3><p>Users can modify the default values in <code>values.yaml</code>. All the fields in <code>genesisBlock</code> section will be populated as <code>genesis.json</code> for VMware Blockchain blockchain.</p><ul><li><strong>alloc</strong>: List of admin accounts who can provide the permissions to other users. These admin accounts by default have read, write and deploy permissions. This field can be modified during blockchain deployment.</li><li><strong>permissioningContractBin</strong>: The binary of the permissioning smart contract goes here. User can extend the permissioning smart contract without changing the <code>checkUserAction</code> and <code>constructor</code> functions.</li></ul><h3 id="non-configurable-fields" tabindex="-1"><a class="header-anchor" href="#non-configurable-fields" aria-hidden="true">#</a> Non-configurable fields</h3><ul><li><strong>permissioningContractAddress</strong>: The permissioning smart contract is pre-deployed during system boot. Note that this field can&#39;t be changed.</li></ul><h2 id="write-permissioning" tabindex="-1"><a class="header-anchor" href="#write-permissioning" aria-hidden="true">#</a> Write Permissioning</h2><h3 id="how-to-enable-write-permissioning" tabindex="-1"><a class="header-anchor" href="#how-to-enable-write-permissioning" aria-hidden="true">#</a> How to enable write permissioning?</h3><p>In <code>values.yaml</code>, under &quot;permissioning&quot; section change <code>ethPermissioningWriteEnabled</code> value to <code>true</code> for write permissioning. The write permissioning is applicable for both &quot;Contract Deployment&quot; and &quot;Write Transactions&quot; to the Blockchain.</p><h3 id="how-to-test-write-permissioning" tabindex="-1"><a class="header-anchor" href="#how-to-test-write-permissioning" aria-hidden="true">#</a> How to test write permissioning?</h3><p>Follow the steps listed below, Node.js version 14.20 and up is preferred.</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># Change to write authorization dApp</span>
<span class="token builtin class-name">cd</span> vmware-blockchain-samples/vmbc-ethereum/permissioning/sample-dapps/write-authorization

<span class="token comment"># Update the .env file with appropriate VMBC_URL Eg: VMBC_URL=&quot;http://x.x.x.x:8545&quot;</span>

<span class="token comment"># Install dependencies</span>
<span class="token function">npm</span> <span class="token function">install</span>

<span class="token comment"># Run the dApp</span>
<span class="token function">node</span> testWrite.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="read-permissioning" tabindex="-1"><a class="header-anchor" href="#read-permissioning" aria-hidden="true">#</a> Read Permissioning</h2><h3 id="how-to-enable-read-permissioning" tabindex="-1"><a class="header-anchor" href="#how-to-enable-read-permissioning" aria-hidden="true">#</a> How to enable read permissioning?</h3><p>For read permissioning, we need <code>vmbc-ethers-extension</code> which is a modified version of open-source ethersjs. In <code>values.yaml</code>, under <code>permissioning</code> section change <code>ethPermissioningReadEnabled</code> value to <code>true</code> for read permissioning. User has to enable both read and write permissioning to test &quot;read permissioning&quot;.</p><h3 id="how-to-test-read-permissioning" tabindex="-1"><a class="header-anchor" href="#how-to-test-read-permissioning" aria-hidden="true">#</a> How to test read permissioning?</h3><p>Follow the steps listed below, Node.js version 14.20 and up is preferred.</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># Change directory into the vmbc-ethers-extension library</span>
<span class="token builtin class-name">cd</span> vmware-blockchain-samples/vmbc-ethereum/permissioning/sample-dapps/read-write-authorization/integration-library/vmbc-ethers-extension

<span class="token comment"># Install dependencies for vmbc-ethers-extension library</span>
<span class="token function">npm</span> <span class="token function">install</span>

<span class="token comment"># Change directory to read test dApp</span>
<span class="token builtin class-name">cd</span> vmware-blockchain-samples/vmbc-ethereum/permissioning/sample-dapps/read-write-authorization/dapp

<span class="token comment"># Update the .env file with appropriate VMBC_URL Eg: VMBC_URL=&quot;http://x.x.x.x:8545&quot; </span>

<span class="token comment"># Install dependencies</span>
<span class="token function">npm</span> <span class="token function">install</span>

<span class="token comment"># Run the dApp</span>
<span class="token function">node</span> testReadWrite.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="details-about-testreadwrite-dapp" tabindex="-1"><a class="header-anchor" href="#details-about-testreadwrite-dapp" aria-hidden="true">#</a> Details about testReadWrite dApp</h4><ul><li>In the testReadWrite.js, enable permissioning flag by calling usePrivatekeyForPermissioning()</li><li>Remember, only admin has the permissions to give permissions to other users, hence for checkPermissions() and addPermissions() functions, you have to use usePrivatekeyForPermissioning(ADMIN_ACCOUNT_PRIVATE_KEY). Other function calls like any read from blockchain or any write to blockchain, you have to use usePrivatekeyForPermissioning(String(accountKeyPair.privateKey)).</li></ul><h3 id="things-to-note" tabindex="-1"><a class="header-anchor" href="#things-to-note" aria-hidden="true">#</a> Things to Note</h3><ol><li>For read permissioning, user has to use <code>vmbc-ethers-extension</code> library</li><li>The Metamask and remix tools will NOT work as expected. Because Metamask and Remix are NOT using vmbc-ethers.js</li><li>Json-rpc-provider is the one which we have tested for read permissioning.</li></ol><h2 id="authorization-gui" tabindex="-1"><a class="header-anchor" href="#authorization-gui" aria-hidden="true">#</a> Authorization GUI</h2>`,29),u=e("li",null,"This is a Sample GUI dApp which can assist you in providing permissioning to any Ethereum account",-1),p=e("li",null,"To provide a permission to an account, you need to use Admin Account of VMware Blockchain",-1),m=e("li",null,"The details about default Admin account in VMware Blockchain is as follows,",-1),b=e("li",null,[n("Admin Account Address: "),e("code",null,"0xFB389874FB4e03182A7358275eaf78008775c7ed")],-1),g=e("li",null,[n("Admin Account Private Key: "),e("code",null,"0x5bedcdfdfe7e3d9444b3494eaee4bb9339be4745d7a4f79cd4bde59d3e9e9dcc")],-1),v=e("li",null,"To use this Admin Account, import this account into Metamask",-1),f=i(`<h2 id="troubleshooting-guide" tabindex="-1"><a class="header-anchor" href="#troubleshooting-guide" aria-hidden="true">#</a> Troubleshooting Guide</h2><h3 id="_1-permission-denied-error" tabindex="-1"><a class="header-anchor" href="#_1-permission-denied-error" aria-hidden="true">#</a> 1. Permission denied Error</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>  code: <span class="token string">&#39;SERVER_ERROR&#39;</span>,
  body: <span class="token string">&#39;{&quot;error&quot;:{&quot;code&quot;:-32060,&quot;data&quot;:&quot;evm error, status code: -2&quot;,&quot;message&quot;:&quot;Permission denied&quot;},&quot;id&quot;:58,&quot;jsonrpc&quot;:&quot;2.0&quot;}&#39;</span>,
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="solution" tabindex="-1"><a class="header-anchor" href="#solution" aria-hidden="true">#</a> Solution</h4><p>You have enabled write permissioning. Make sure the ethereum account you are using to send transactions or deploy contract has the WRITE/DEPLOY permission.</p><h3 id="_2-request-not-signed-error" tabindex="-1"><a class="header-anchor" href="#_2-request-not-signed-error" aria-hidden="true">#</a> 2. Request Not Signed Error</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>  code: <span class="token string">&#39;SERVER_ERROR&#39;</span>,
  body: <span class="token string">&#39;{&quot;error&quot;:{&quot;code&quot;:-32602,&quot;message&quot;:&quot;Request not signed&quot;},&quot;id&quot;:47,&quot;jsonrpc&quot;:&quot;2.0&quot;}&#39;</span>,
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="solution-1" tabindex="-1"><a class="header-anchor" href="#solution-1" aria-hidden="true">#</a> Solution</h4><p>You have enabled read permissioning. Make sure you are using <code>vmbc-ethers-extension</code> in <code>package.json</code> example <code>&quot;@vmware-blockchain/ethers-extension&quot;: &quot;file:../integration-library/vmbc-ethers-extension&quot;</code>. In addition to that check your DAPP, you should call the setSigningKey() API, example <code>PROVIDER.setSigningKey({readPermissioningKeyOrEnable: privateKey});</code> and your DAPP should use JSON RPC provider to interact with Blockchain.</p><h2 id="references" tabindex="-1"><a class="header-anchor" href="#references" aria-hidden="true">#</a> References</h2><ul><li>JSON RPC API - https://ethereum.org/en/developers/docs/apis/json-rpc/</li><li>JSON RPC Provider Ethers.js - https://docs.ethers.io/v5/api/providers/jsonrpc-provider/</li><li>Web3 Provider Ethers.js - https://docs.ethers.io/v5/api/providers/other/#Web3Provider</li></ul>`,11);function w(k,y){const s=o("RouterLink");return t(),r("div",null,[h,e("ul",null,[u,p,m,b,g,v,e("li",null,[n("Link to more details about Running and Using Authorization GUI is "),d(s,{to:"/permissioning/sample-dapps/authorization-gui/"},{default:c(()=>[n("here")]),_:1})])]),f])}const q=a(l,[["render",w],["__file","index.html.vue"]]);export{q as default};
